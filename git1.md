## 版本控制

1. 首先进入需要管理文件夹（进入）
2. 初始化（提名）
   - `gitinit`
   - `.git`文件存储相关`git`信息
3. 管理这个文件夹
   - `git status`检测工作区文件状态
   - `git add 文件名`设置管理文件，生成版本
   - `git add .`管理所有还未管理的文件生成版本
4. 生成版本
   - `git commit -m '版本信息'`生成版本
5. 修改文件之后版本控制
   - 修改文件后，使用`git status`可以检测到我们对已管理文件的修改
   - 我们需要重复管理和生成版本的步骤
     - `git add .`或者`git add 修改的文件`
     - `git commit -m '版本信息'`
6. 如何查看版本记录
   - `git log`查看版本

### 命令集合

```git
git init 初始化所管理的目录，告诉系统在这个目录使用git管理
git status 检测所管理目录下的文件状态
git add . 管理所有还未被管理的文件
git add xxx 指定管理文件
git commit -m '版本信息' 提交版本
git log 查看git的版本记录/日志
git reflog
git reset --soft 版本号 从版本库退到暂存区
git reset --mix 版本号 从版本库退到已修改工作区
git reset --hard 版本号 从版本库退到工作区
git reset --HEAD 从暂存区回到已修改状态
git checkout 已修改文件退回到已控制区域
```

- 三种状态变化
  - 红色：新增或被修改了的文件 -->git add .|文件名
  - 绿色：git 已经管理但是还未生成版本 -->git commit -m '版本信息'
  - 生成版本

## 配置全局邮箱

```git
git config --global user.email "邮箱"
git config --global user.name "用户名"
```

- 如果不进行全局邮箱配置的话，在`git commit -m '版本信息'`提交版本的时候会报错
- 在项目开始的时候配置一次即可

## `git`三大区域

### 工作区

- 已管理部分
- 新文件或者已修改的文件部分
- `git`会自动检测区分文件属于哪个部分
- 使用`git add`将工作区文件提交到暂存区

### 暂存区

- 一个缓冲区（在工作区和版本库之间设置一个缓冲区域）

- 使用`git commit -m '版本信息'`提交到版本库

### 版本库

- 保留所有的已提交的版本

### 回滚

- `git reset --hard 'commit序列号'`从版本库回滚到指定的序列号版本
- `git reflog`检查版本日志

![](C:\Users\Administrator\Desktop\git学习\imgs\7.png)



## 分支

- 我们在提交一个新的版本的时候，有没有想过如果一直存储重复的文件，会不会显得很二逼，而且很不高效。
- `git`在提交一个新的版本的时候，会有一个默认的主支`master`，主支上按照提交的顺序进行串联。
- 主支上的新版本有个指针指向上一个版本的内容，而新的版本只会保存基于上一个版本的更改或者新增的部分。
- 我们也可以在主支上的某一个版本处，增加分支，这样分支可以在主支的版本上进行操作。操作完毕后再合并到主支上去。
- 分支相当于流水线，这样可以基于一个版本同时进行不同功能的开发，并且互不冲突。
- 使用分支可以隔离环境，不对主线的文件产生污染。

![](C:\Users\Administrator\Desktop\git学习\imgs\8.png)



## 紧急bug的修复问题

- 我们正在开发一个新的版本，然后我们的线上版本遇到了bug需要紧急修复。这个时候我们怎么暂存手上的开发（不丢失），怎么紧急修复bug且不影响线上的版本？

- 分支可以完美的解决这个问题 ，这也是很多人在提到版本控制的分支时候，最喜欢用来举例的问题。

- 这个时候我们可以创建两个分支，一个是开发新功能的分支，一个是修复bug的分支；修复完bug之后，合并修复bug的分支和主分支；然后回到新功能开发分支继续开发，开发完毕后进行合并到主分支。

- **分支合并的冲突**：在下图中，新功能是基于版本3的基础上进行开发，并没有修复`bug`；而我们在合并新功能的时候用的是修复了`bug`的版本4，与新功能合并；这个时候就会产生快速合并的冲突，系统不知道怎么合并；他会保存两个地方的冲突，然后我们需要去手动修复冲突；执行完手动修复冲突，然后重新提交。

  ![](C:\Users\Administrator\Desktop\git学习\imgs\6.png)

  

##  分支的命令

- 主干线默认的名字叫`master`
- 使用`git branch`查看分支
  - `*分支名`表示目前所在的分支
- 使用`git branch 分支名`创建新的分支
- 使用`git checkout 分支名`切换分支
- 切换到主干线`master`，使用`git merge bug`将`bug`分支合并到`master`
- 使用`git branch -d 需要删除的分支名`删除没有用的分支

## GitHub

- 前面我们所做的`git`管理都是本地的，如果我们离开了这台电脑，那么我们就不能继续我们的开发。这个时候我们就需要一个仓库来存储我们的文件，并且保证无论我在哪，使用哪台计算机都能继续按照我们拿到我们所有的`git`管理信息。
- `GitHub`就是一个大型的代码托管平台，在上面创建一个仓库，保存我们的代码，然后再在上面下载我们的代码，继续我们的开发。
- 代码托管平台有很多，现在普遍使用的是`github`,`码云`

### GitHub基础使用

- 注册一个`github`账号
- 创建一个仓库
- 上传我们本地`git`管理到仓库

```
# 将我们的远程地址加一个别名
git remote add origin https://xxxx
# 从本地推送到远端仓库地址
git push -u origin 需要推送的分支名称
```

- 下载仓库的文件到本地
  - 下载的分支不会显示，但是分支是存在的，我们可以直接通过分支名，进行切换。

```
# 克隆代码
git clone https://xxxxxx （内部已经实现了 别名添加）
# 切换分支
git checkout 分支名称
```